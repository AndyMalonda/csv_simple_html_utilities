<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSV Parser</title>
    <link rel="stylesheet" href="style.css">

</head>

<body>

    <div class="container">
        <h1 class="text-center">Simple CSV Formatter</h1>
        <form id="csvForm">
            <div class="flex-row">
                <div class="form-group">
                    <label for="separator">Separator</label>
                    <select class="form-control" id="separator">
                        <option value=";">;</option>
                        <option value=",">,</option>
                        <option value="\t">Tab</option>
                        <option value=" ">Space</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="customSeparator">Custom Separator</label>
                    <input type="text" class="form-control" id="customSeparator" placeholder="Enter custom separator">
                </div>
            </div>
            <div class="flex-row">
                <div class="form-group">
                    <label for="headerRow">Header Row</label>
                    <input type="checkbox" id="headerRow" checked>
                </div>
                <div class="form-group">
                    <label for="escapeChar">Escape Character</label>
                    <input type="text" class="form-control" id="escapeChar" value='\\'>
                </div>
                <div class="form-group">
                    <label for="quoteChar">Quote Character</label>
                    <input type="text" class="form-control" id="quoteChar" value='"'>
                </div>
            </div>
            <div class="form-group">
                <label for="csvFile">Upload CSV File</label>
                <input type="file" class="form-control" id="csvFile" accept=".csv">
                <textarea class="form-control mt-2" id="csvText" rows="10"
                    placeholder="Or paste CSV text here"></textarea>
                <div class="mt-3">
                    <label>Output Format</label>
                    <hr>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="outputFormat" id="formatCSV" value="csv"
                            checked>
                        <label class="form-check-label" for="formatCSV">CSV (table view)</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="outputFormat" id="formatJSON" value="json">
                        <label class="form-check-label" for="formatJSON">JSON</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="outputFormat" id="formatXML" value="xml">
                        <label class="form-check-label" for="formatXML">XML</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="outputFormat" id="formatMarkdown"
                            value="markdown">
                        <label class="form-check-label" for="formatMarkdown">Markdown</label>
                    </div>
                </div>
            </div>
            <div class="mt-3">
                <button type="submit" class="btn btn-primary">Format</button>
                <button type="button" class="btn btn-secondary" id="clearButton">Clear</button>
                <button type="button" class="btn btn-secondary" id="copyButton">Copy</button>
                <button type="button" class="btn btn-success" id="downloadButton">Download</button>
            </div>
        </form>
    </div>

    <div class="container mt-5">
        <div id="outputContainer">
            <!-- Will be filled by script -->
        </div>
    </div>

</body>

</html>
<script>
    let inputFileName = ""; function handleFormSubmit(e) { e.preventDefault(); let t = document.getElementById("csvText").value, n = document.getElementById("separator").value, a = document.getElementById("customSeparator").value, l = document.getElementById("headerRow").checked, o = document.getElementById("quoteChar").value, r = document.getElementById("escapeChar").value, i = document.querySelector('input[name="outputFormat"]:checked').value; if (a && (n = a), "" === t.trim()) { alert("Please provide CSV text or upload a file."); return } let d = parseCSV(t, n, o, r); switch (i) { case "json": let u = formatCSVToJSON(d, l); displayJSON(u); break; case "xml": let c = formatCSVToXML(d, l); displayXML(c); break; case "markdown": let m = formatCSVToMarkdown(d, l); displayMarkdown(m); break; default: let p = formatCSVToHTMLTable(d); insertHTMLTable(p) } } function handleFileUpload(e) { let t = e.target.files[0]; if (t) { inputFileName = t.name.split(".").slice(0, -1).join("."); let n = new FileReader; n.onload = e => { document.getElementById("csvText").value = e.target.result }, n.readAsText(t) } } function clearForm() { document.getElementById("csvText").value = "", document.getElementById("outputContainer").innerHTML = "", inputFileName = "" } function copyContent() { let e = document.getElementById("outputContainer"), t = e.textContent; t && navigator.clipboard.writeText(t).then(() => { alert("Content copied to clipboard.") }).catch(e => { alert("Failed to copy content to clipboard.") }) } function downloadFormattedOutput() { let e = document.getElementById("csvText").value, t = document.getElementById("separator").value, n = document.getElementById("customSeparator").value, a = document.getElementById("headerRow").checked, l = document.getElementById("quoteChar").value, o = document.getElementById("escapeChar").value, r = document.querySelector('input[name="outputFormat"]:checked').value; if ("" === e.trim()) { alert("Please provide CSV text to download."); return } n && (t = n); let i = parseCSV(e, t, l, o), d = inputFileName ? `${inputFileName}_formatted` : "formatted"; function u(e, t, n) { let a = new Blob([e], { type: n }), l = URL.createObjectURL(a), o = document.createElement("a"); o.href = l, o.download = t, o.click(), URL.revokeObjectURL(l) } switch (r) { case "json": let c = formatCSVToJSON(i, a), m = JSON.stringify(c, null, 2); u(m, `${d}.json`, "application/json"); break; case "xml": let p = formatCSVToXML(i, a); u(p, `${d}.xml`, "application/xml"); break; case "markdown": let s = formatCSVToMarkdown(i, a); u(s, `${d}.md`, "text/markdown"); break; default: u(e, `${d}.csv`, "text/csv") } } function formatCSVToHTMLTable(e) { let t = '<table class="table table-bordered">'; return e.forEach(e => { t += "<tr>", e.forEach(e => { t += `<td>${e}</td>` }), t += "</tr>" }), t += "</table>" } function insertHTMLTable(e) { let t = document.getElementById("outputContainer"); t.innerHTML = e } function formatCSVToJSON(e, t) { let n = [], a = []; return t ? (a = e[0], e.shift()) : a = e[0].map((e, t) => `column${t + 1}`), e.forEach(e => { let t = {}; e.forEach((e, n) => { t[a[n]] = e }), n.push(t) }), n } function displayJSON(e) { let t = JSON.stringify(e, null, 2), n = document.createElement("pre"); n.textContent = t; let a = document.getElementById("outputContainer"); a.innerHTML = "", a.appendChild(n) } function formatCSVToXML(e, t) {
        let n = '<?xml version="1.0" encoding="UTF-8"?>\n<rows>\n', a = []; return t ? (a = e[0], e.shift()) : a = e[0].map((e, t) => `column${t + 1}`), e.forEach(e => {
            n += "  <row>\n", e.forEach((e, t) => {
                n += `    <${a[t]}>${e}</${a[t]}>
`}), n += "  </row>\n"
        }), n += "</rows>"
    } function displayXML(e) { let t = document.createElement("pre"); t.textContent = e; let n = document.getElementById("outputContainer"); n.innerHTML = "", n.appendChild(t) } function formatCSVToMarkdown(e, t) {
        let n = "", a = []; return t && (a = e[0], e.shift(), n += `| ${a.join(" | ")} |
`, n += `| ${a.map(() => "---").join(" | ")} |
`), e.forEach(e => {
            n += `| ${e.join(" | ")} |
`}), n
    } function displayMarkdown(e) { let t = document.createElement("pre"); t.textContent = e; let n = document.getElementById("outputContainer"); n.innerHTML = "", n.appendChild(t) } function parseCSV(e, t, n, a) { let l = [], o = [], r = "", i = !1; for (let d = 0; d < e.length; d++) { let u = e[d], c = e[d + 1]; u === n ? i && c === n ? (r += n, d++) : i = !i : u !== t || i ? "\n" !== u && "\r" !== u || i ? r += u : ((r || o.length > 0) && (o.push(r), l.push(o), o = [], r = ""), "\r" === u && "\n" === c && d++) : (o.push(r), r = "") } return (r || o.length > 0) && (o.push(r), l.push(o)), l } document.getElementById("csvForm").addEventListener("submit", handleFormSubmit), document.getElementById("csvFile").addEventListener("change", handleFileUpload), document.getElementById("clearButton").addEventListener("click", clearForm), document.getElementById("copyButton").addEventListener("click", copyContent), document.getElementById("downloadButton").addEventListener("click", downloadFormattedOutput);
</script>

</body>

</html>